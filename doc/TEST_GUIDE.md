# 테스트 가이드 (Test Guide)

이 문서는 Flutter Riverpod Todo 애플리케이션의 기능 테스트 가이드를 제공합니다.

---

## 테스트 환경 설정

### 필수 요구사항
- Flutter SDK 설치 확인
- 개발 환경 (Android Studio / VS Code)
- 에뮬레이터 또는 실제 기기

### 앱 실행
```bash
# 의존성 설치
flutter pub get

# 코드 생성 (Riverpod Provider)
dart run build_runner build --delete-conflicting-outputs

# 앱 실행
flutter run
```

---

## 9.1 기본 기능 테스트

### 할일 목록 조회 테스트

#### 테스트 시나리오 1: 빈 목록 표시
1. 앱 실행
2. 초기 화면 확인
   - [ ] "할일이 없습니다" 메시지 표시 확인
   - [ ] "우측 하단 버튼을 눌러 할일을 추가하세요" 안내 메시지 표시 확인
   - [ ] FloatingActionButton 표시 확인
3. 로그 확인
   - [ ] `TodoListScreen 진입` 로그 출력 확인
   - [ ] `TodoNotifier 초기화` 로그 출력 확인

#### 테스트 시나리오 2: 목록이 있을 때 표시
1. 할일 추가 (아래 "할일 추가 테스트" 참조)
2. 목록 화면 확인
   - [ ] 추가한 Todo가 목록에 표시되는지 확인
   - [ ] TodoItem 위젯이 제대로 렌더링되는지 확인
   - [ ] 제목, 설명, 완료 상태가 표시되는지 확인
3. 로그 확인
   - [ ] `Todo 목록 조회: N개` 로그 출력 확인

### 할일 추가 테스트

#### 테스트 시나리오 1: 정상 추가
1. FloatingActionButton 클릭
2. 할일 추가 팝업 확인
   - [ ] 팝업이 열리는지 확인
   - [ ] 제목 입력 필드 표시 확인
   - [ ] 설명 입력 필드 표시 확인
3. 입력 및 저장
   - [ ] 제목 입력: "테스트 할일"
   - [ ] 설명 입력: "테스트 설명" (선택사항)
   - [ ] "추가" 버튼 클릭
4. 결과 확인
   - [ ] 팝업이 닫히는지 확인
   - [ ] SnackBar에 "할일이 추가되었습니다." 메시지 표시 확인
   - [ ] 목록에 추가된 Todo가 표시되는지 확인
5. 로그 확인
   - [ ] `Todo 추가 화면 열기` 로그 출력 확인
   - [ ] `Todo 추가 시도: 테스트 할일` 로그 출력 확인
   - [ ] `Todo 추가 시작: 테스트 할일` 로그 출력 확인
   - [ ] `Todo 추가 완료: ... (소요 시간: ...ms)` 로그 출력 확인

#### 테스트 시나리오 2: 유효성 검증
1. FloatingActionButton 클릭
2. 제목 없이 저장 시도
   - [ ] 제목 필드를 비워둠
   - [ ] "추가" 버튼 클릭
3. 결과 확인
   - [ ] 에러 다이얼로그 표시 확인
   - [ ] "제목은 필수입니다." 에러 메시지 표시 확인
   - [ ] 팝업이 닫히지 않는지 확인
4. 로그 확인
   - [ ] `Todo 추가 실패 - 검증 오류` 로그 출력 확인

#### 테스트 시나리오 3: 중복 체크
1. "테스트 할일" 제목으로 Todo 추가
2. 동일한 제목으로 다시 추가 시도
   - [ ] 제목: "테스트 할일" (대소문자 무관)
   - [ ] "추가" 버튼 클릭
3. 결과 확인
   - [ ] 에러 다이얼로그 표시 확인
   - [ ] "이미 존재하는 Todo입니다: 테스트 할일" 에러 메시지 표시 확인
4. 로그 확인
   - [ ] `중복된 Todo 발견: 테스트 할일` 로그 출력 확인
   - [ ] `Todo 추가 실패 - 중복 오류` 로그 출력 확인

### 할일 수정 테스트

#### 테스트 시나리오 1: 정상 수정
1. 목록에서 Todo 항목 클릭
2. 수정 팝업 확인
   - [ ] 팝업이 열리는지 확인
   - [ ] 기존 제목과 설명이 입력 필드에 표시되는지 확인
3. 수정 및 저장
   - [ ] 제목 수정: "수정된 할일"
   - [ ] 설명 수정: "수정된 설명"
   - [ ] "수정" 버튼 클릭
4. 결과 확인
   - [ ] 팝업이 닫히는지 확인
   - [ ] SnackBar에 "할일이 수정되었습니다." 메시지 표시 확인
   - [ ] 목록에 수정된 내용이 반영되는지 확인
5. 로그 확인
   - [ ] `Todo 수정 화면 열기: [todoId]` 로그 출력 확인
   - [ ] `Todo 수정 시도: [todoId]` 로그 출력 확인
   - [ ] `Todo 수정 시작: [todoId]` 로그 출력 확인
   - [ ] `Todo 수정 완료: [todoId] (소요 시간: ...ms)` 로그 출력 확인

#### 테스트 시나리오 2: 존재하지 않는 Todo 수정 시도
1. Todo를 삭제한 후 (또는 존재하지 않는 ID 사용)
2. 존재하지 않는 Todo ID로 수정 시도
3. 결과 확인
   - [ ] 에러 다이얼로그 표시 확인
   - [ ] "Todo를 찾을 수 없습니다: [todoId]" 에러 메시지 표시 확인
4. 로그 확인
   - [ ] `Todo를 찾을 수 없음: [todoId]` 로그 출력 확인
   - [ ] `Todo 수정 실패 - Todo를 찾을 수 없음` 로그 출력 확인

#### 테스트 시나리오 3: 유효성 검증
1. Todo 항목 클릭
2. 제목을 비우고 저장 시도
   - [ ] 제목 필드 비우기
   - [ ] "수정" 버튼 클릭
3. 결과 확인
   - [ ] 에러 다이얼로그 표시 확인
   - [ ] "제목은 필수입니다." 에러 메시지 표시 확인

### 할일 삭제 테스트

#### 테스트 시나리오 1: 정상 삭제
1. Todo 항목의 삭제 버튼 클릭
2. 삭제 확인 다이얼로그 확인
   - [ ] "삭제 확인" 다이얼로그 표시 확인
   - [ ] "정말 삭제하시겠습니까?" 메시지 표시 확인
   - [ ] "취소", "삭제" 버튼 표시 확인
3. 삭제 확인
   - [ ] "삭제" 버튼 클릭
4. 결과 확인
   - [ ] 다이얼로그가 닫히는지 확인
   - [ ] SnackBar에 "Todo가 삭제되었습니다." 메시지 표시 확인
   - [ ] 목록에서 Todo가 제거되는지 확인
5. 로그 확인
   - [ ] `Todo 삭제 시도: [todoId]` 로그 출력 확인
   - [ ] `삭제 확인 다이얼로그 표시: [todoId]` 로그 출력 확인
   - [ ] `삭제 확인됨: [todoId]` 로그 출력 확인
   - [ ] `Todo 삭제 시작: [todoId]` 로그 출력 확인
   - [ ] `Todo 삭제 완료: [todoId] (소요 시간: ...ms)` 로그 출력 확인

#### 테스트 시나리오 2: 삭제 취소
1. Todo 항목의 삭제 버튼 클릭
2. "취소" 버튼 클릭
3. 결과 확인
   - [ ] 다이얼로그가 닫히는지 확인
   - [ ] Todo가 삭제되지 않는지 확인
4. 로그 확인
   - [ ] `Todo 삭제 취소: [todoId]` 로그 출력 확인

#### 테스트 시나리오 3: 존재하지 않는 Todo 삭제 시도
1. Todo를 삭제한 후 동일한 ID로 다시 삭제 시도
2. 결과 확인
   - [ ] SnackBar에 에러 메시지 표시 확인
   - [ ] "Todo를 찾을 수 없습니다" 에러 메시지 확인
3. 로그 확인
   - [ ] `Todo를 찾을 수 없음: [todoId]` 로그 출력 확인
   - [ ] `Todo 삭제 실패 - Todo를 찾을 수 없음` 로그 출력 확인

---

## 9.2 UI/UX 테스트

### NestedScrollView 스크롤 동작 확인
1. 여러 개의 Todo 추가 (10개 이상 권장)
2. 스크롤 테스트
   - [ ] 목록을 위아래로 스크롤할 수 있는지 확인
   - [ ] SliverAppBar가 스크롤에 따라 동작하는지 확인
   - [ ] "총 N개의 할일" 헤더가 표시되는지 확인

### 팝업 열기/닫기 동작 확인
1. 추가 팝업 테스트
   - [ ] FloatingActionButton 클릭 시 팝업이 열리는지 확인
   - [ ] "취소" 버튼 클릭 시 팝업이 닫히는지 확인
   - [ ] "추가" 버튼 클릭 후 성공 시 팝업이 닫히는지 확인
2. 수정 팝업 테스트
   - [ ] Todo 항목 클릭 시 팝업이 열리는지 확인
   - [ ] 기존 데이터가 입력 필드에 표시되는지 확인
   - [ ] "취소" 버튼 클릭 시 팝업이 닫히는지 확인
   - [ ] "수정" 버튼 클릭 후 성공 시 팝업이 닫히는지 확인

### 에러 다이얼로그 표시 확인
1. 유효성 검증 에러
   - [ ] 제목 없이 저장 시도 시 에러 다이얼로그 표시 확인
   - [ ] 에러 메시지가 명확하게 표시되는지 확인
2. 중복 에러
   - [ ] 동일한 제목으로 추가 시도 시 에러 다이얼로그 표시 확인
3. 존재하지 않는 Todo 에러
   - [ ] 존재하지 않는 Todo 수정/삭제 시도 시 에러 다이얼로그 표시 확인

### 로딩 상태 표시 확인
- [ ] 현재 구현에서는 로딩 인디케이터가 별도로 표시되지 않음 (향후 확장 시 추가 가능)

---

## 9.3 예외 처리 테스트

### 유효성 검증 예외 처리 확인
1. 제목 없이 저장 시도
   - [ ] `TodoValidationException` 발생 확인
   - [ ] 에러 다이얼로그에 적절한 메시지 표시 확인
   - [ ] 로그에 에러 정보 기록 확인

### 존재하지 않는 Todo 접근 시 예외 처리 확인
1. 존재하지 않는 Todo ID로 수정 시도
   - [ ] `TodoNotFoundException` 발생 확인
   - [ ] 에러 다이얼로그에 적절한 메시지 표시 확인
   - [ ] 로그에 에러 정보 기록 확인

### 예외 발생 시 로깅 확인
1. 각 예외 상황에서 로그 확인
   - [ ] Error 레벨 로그 출력 확인
   - [ ] 스택 트레이스 포함 확인
   - [ ] 컨텍스트 정보 (Todo ID, 제목 등) 포함 확인

### 사용자에게 적절한 에러 메시지 표시 확인
1. 각 예외 상황에서 에러 다이얼로그 확인
   - [ ] 사용자 친화적인 메시지 표시 확인
   - [ ] 기술적인 에러 메시지가 아닌 이해하기 쉬운 메시지 확인

---

## 9.4 로깅 테스트

### 주요 기능 실행 시 로그 출력 확인
1. 앱 시작
   - [ ] `애플리케이션 시작` 로그 출력 확인
   - [ ] `TodoListScreen 진입` 로그 출력 확인
   - [ ] `TodoNotifier 초기화` 로그 출력 확인

2. Todo 추가
   - [ ] `Todo 추가 화면 열기` 로그 출력 확인
   - [ ] `Todo 추가 시도: [제목]` 로그 출력 확인
   - [ ] `Todo 추가 시작: [제목]` 로그 출력 확인
   - [ ] `Todo 추가 완료: [제목] (소요 시간: ...ms)` 로그 출력 확인

3. Todo 수정
   - [ ] `Todo 수정 화면 열기: [todoId]` 로그 출력 확인
   - [ ] `Todo 수정 시도: [todoId]` 로그 출력 확인
   - [ ] `Todo 수정 시작: [todoId]` 로그 출력 확인
   - [ ] `Todo 수정 완료: [todoId] (소요 시간: ...ms)` 로그 출력 확인

4. Todo 삭제
   - [ ] `Todo 삭제 시도: [todoId]` 로그 출력 확인
   - [ ] `삭제 확인 다이얼로그 표시: [todoId]` 로그 출력 확인
   - [ ] `삭제 확인됨: [todoId]` 로그 출력 확인
   - [ ] `Todo 삭제 시작: [todoId]` 로그 출력 확인
   - [ ] `Todo 삭제 완료: [todoId] (소요 시간: ...ms)` 로그 출력 확인

### 로그 레벨 구분 확인
1. 로그 레벨별 확인
   - [ ] Debug 레벨: `logger.d()` 사용 확인
   - [ ] Info 레벨: `logger.i()` 사용 확인
   - [ ] Warning 레벨: `logger.w()` 사용 확인
   - [ ] Error 레벨: `logger.e()` 사용 확인

### 에러 로그에 스택 트레이스 포함 확인
1. 예외 발생 시 로그 확인
   - [ ] `logger.e()` 호출 시 `error` 파라미터 포함 확인
   - [ ] `logger.e()` 호출 시 `stackTrace` 파라미터 포함 확인
   - [ ] 콘솔에 스택 트레이스가 출력되는지 확인

### 성능 로그 출력 확인
1. 주요 메서드 실행 시간 측정
   - [ ] Todo 추가 시 소요 시간 로그 출력 확인
   - [ ] Todo 수정 시 소요 시간 로그 출력 확인
   - [ ] Todo 삭제 시 소요 시간 로그 출력 확인

---

## 테스트 체크리스트

### 기본 기능
- [ ] 할일 목록 조회 (빈 목록)
- [ ] 할일 목록 조회 (목록 있음)
- [ ] 할일 추가 (정상)
- [ ] 할일 추가 (유효성 검증 실패)
- [ ] 할일 추가 (중복 체크)
- [ ] 할일 수정 (정상)
- [ ] 할일 수정 (존재하지 않는 Todo)
- [ ] 할일 수정 (유효성 검증 실패)
- [ ] 할일 삭제 (정상)
- [ ] 할일 삭제 (취소)
- [ ] 할일 삭제 (존재하지 않는 Todo)

### UI/UX
- [ ] NestedScrollView 스크롤 동작
- [ ] 추가 팝업 열기/닫기
- [ ] 수정 팝업 열기/닫기
- [ ] 에러 다이얼로그 표시
- [ ] SnackBar 메시지 표시

### 예외 처리
- [ ] 유효성 검증 예외 처리
- [ ] 존재하지 않는 Todo 예외 처리
- [ ] 예외 발생 시 로깅
- [ ] 사용자 친화적 에러 메시지

### 로깅
- [ ] 주요 기능 실행 시 로그 출력
- [ ] 로그 레벨 구분
- [ ] 에러 로그에 스택 트레이스 포함
- [ ] 성능 로그 출력

---

## 테스트 실행 방법

### 1. 수동 테스트
위의 테스트 시나리오를 따라 수동으로 테스트를 수행합니다.

### 2. 로그 확인
테스트 중 콘솔에서 로그를 확인하여 각 기능이 올바르게 로깅되는지 확인합니다.

### 3. 문제 발견 시
- 로그를 확인하여 문제 원인 파악
- 예외 처리 및 에러 메시지 확인
- 코드 리뷰 및 수정

---

## 참고 사항

- 모든 테스트는 실제 기기 또는 에뮬레이터에서 실행해야 합니다
- 로그는 개발 환경에서만 상세하게 출력됩니다
- 프로덕션 환경에서는 Warning 이상의 로그만 출력됩니다
- 테스트 중 발견된 문제는 즉시 수정하고 재테스트합니다
